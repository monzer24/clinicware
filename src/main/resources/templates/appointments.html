<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.w3.org/1999/xhtml">
<head>
	<title>ClinicWare</title>
	<title>Today's Appointments</title>
	<link href="/static/css/main.css" th:href="@{/css/style.css}" rel="stylesheet" type="text/css" media="screen"/>
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"/>
</head>
<body>

<!-- ----------Home ------------>
	<div id="wrapper" th:with="page = 0">
        <div style="width: 100%; background-color: #07575B; color: white ">
            <h2 th:if="${result}" th:text="${result}"></h2>
        </div>
	<div id="header">
		<div style="width: 100%; background-color: #eee; display: inline-block;">
			<div style="width: 100%; background-color: #eee; padding:3px;">
				<div class="hover" style="float: right; margin: 5px; overflow: auto; ">
					<img th:src="@{/image/receptionist.png}" style="width: 35px; height: 35px;float: left; margin-right: 5px"/>
					<img th:src="@{/image/arrow-down.png}" style="width: 15px; height: 10px; float: right; margin-top:15px;"/>
				</div>
				<h3 th:text="'Hello ' + ${user.firstName}"> </h3>
			</div>
		</div>
		<div id="main">
			<div id="menu">
<!-- 				<h2>Menu</h2>
				<p>This column is fixed.</p>
				<p>This column is fixed.</p>
				<p>This column is fixed.</p>
				<p>This column is fixed.</p>
				<p>This column is fixed.</p>-->
				<div>
					<div style="width: 100%; float: left;">
						<div style="margin-top: 10px;">
							<h6 style="color: #777777; margin-left: 46%;"></h6>
						</div>
						<div class="list-item">
							<a onclick="hide('appointments')">
								<img th:src="@{/image/appointment.png}" th:style="'filter: invert(100%);'" />Appointments
							</a>
						</div>
						<div class="list-item">
							<a>
								<img th:src="@{/image/appointment.png}" th:style="'filter: invert(100%);'"/>Create An Appointment
							</a>
						</div>
						<div class="list-item">
							<a onclick="hide('create-patient')">
								<img th:src="@{/image/add-contact.png}" th:style="'filter: invert(100%);'"/>Add Patient
							</a>
						</div>
						<div  class="list-item">
							<a href="/interval/update">
								<img th:src="@{/image/visitor.png}" th:style="'filter: invert(100%);'"/>Add Visit
							</a>
						</div>
						<div class="list-item">
<!--							<a href="/appointments/interval" layout:fragment="fragments/interval">-->
                            <a onclick="hide('create-interval')">
								<img th:src="@{/image/intervals.png}" style="filter: invert(100%);"/>Edit Intervals
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

<!--        <th:block th:if="${fragment}">-->
<!--            <div th:replace="fragments/interval :: div">-->
<!--            </div>-->
<!--        </th:block>-->
        <div id="appointments" style="display: inline-block; position: absolute; width: 60%;">
            <div style="position: relative;">
                <div style="float: right;width: 70%; padding-left: 5px;">
                    <input type="text" name="search" placeholder="Search" style="width: 100%; padding-left: 1px; padding-bottom: 2px; padding-top: 2px; font-size: 15px;"><br/>
                    <table>
                        <tr>
                            <td style="align-items: center">
                                Filters: <br/>
                            </td>
                            <td>
                                From Date: <input style="width: 60%; height: 25px;" type="text" name="from"/>
                            </td>
                            <td>
                                To Date : <input type="text" style="width: 60%;height: 25px;" name="to">
                            </td>
                            <td>
                                Patient Name: <input type="text" style="width: 60%;height: 25px;" name="name"/>
                            </td>
                        </tr>
                    </table>

                </div>
            </div>
            <div style="width: 100%;">
                <table class="tg">
                    <tr>
                        <thead class="tg-amwm">
                        <td>
                            Appointment No.
                        </td>
                        <td>
                            Patient Name
                        </td>
                        <td>
                            Appointment Date
                        </td>
                        <td>
                            Start
                        </td>
                        <td>
                            End
                        </td>
                        <td></td>
                        </thead>
                    </tr>
                    <tbody>
                    <tr th:each="appointment : ${appointments}">
                        <td style="width: 1%;">
                            <span th:text="${appointment.ctiID}"> id </span>
                        </td>
                        <td>
                            <span th:text="${appointment.englishName}">name</span>
                        </td>
                        <td>
                            <span th:text="${appointment.date}">date</span>
                        </td>
                        <td>
                            <span th:text="${appointment.start}">start</span>
                        </td>
                        <td>
                            <span th:text="${appointment.end}">end</span>
                        </td>
                        <td>
                            <div class="dropdown" style="width: 1px;">
                                <!-- <img src="option.png" style="width: 15px; height: 15px; float: right"> -->
                                <img th:src="@{/image/option.png}" class="dropbtn" />
                              <div id="myDropdown" class="dropdown-content">
                                    <a th:href="@{/appointments/book(ctiID=${appointment.ctiID})}" >Book Appointment</a>
                                    <a href="#">Cancel Appointment</a>
                                    <a href="#">Create Visit</a>
                                    <a href="#">Cancel Visit</a>
                                    <a href="#">Update Appointment</a>
                                </div>
                            </div>
                        </td>
                    </tr>

                    </tbody>
                </table>
            </div>
        </div>

        <div id="create-interval" style="width:63%; display: none;font-size: 100%;  position: absolute;">
            <form method="post" th:action="@{/interval/update}">
                <div style="width: 100%; padding-top:1px; border: thick; ">
                    <div style="  border: 1px solid; border-color: #aaa;padding: 25px;background-color: white;box-shadow: 2px 2px 7px grey;">
                        <div style="margin-top: 2%;">
                            <div style="display: inline; margin-right: 15px">
                                <button style="padding-top: 10px; padding-bottom: 10px;" th:href="@{/interval/update}">
                                    <img th:src="@{/image/save1.png}" style="width: 20px; height: 20px;"> Save
                                </button>
                            </div>
                            <div style="display: inline;">
                                <button style="padding-top: 10px; padding-bottom: 10px; background-color: #82bcc9" onclick="hide()">
                                    <img th:src="@{/image/save.png}" style="width: 15px; height: 15px;"> Cancel
                                </button>
                            </div>
                        </div>
                        <h1 style="margin: 2%;">Intervals</h1>
                        <div style="margin-left: 3%; padding-bottom: 2%;">
                            <table class="create">
                                <tr>
                                    <td style="width: 40%">
                                        Clinic
                                    </td>
                                    <td style="width: 40%">
                                        : <select class="select-css" style="width: 90%;" name="clinicId">
                                        <option value="0">Select a clinic</option>
                                        <option th:each="clinic : ${clinics}"
                                                th:value="${clinic.id}"
                                                th:text="${clinic.clinicName}">
                                        </option>
                                    </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 40%">
                                        Doctor Name
                                    </td>
                                    <td style="width: 40%">
                                        : <input type="text" th:name="doctorId" style="width: 90%;">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 40%">
                                        Date
                                    </td>
                                    <td style="width: 40%">
                                        : <input type="date" th:name="date" style="width: 90%;">
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        Start
                                    </td>
                                    <td>
                                        : <input type="text" size="5" placeholder="HH:MM" maxlength="5" style="width: 90%;" onkeypress="return isNumber(event,this)" name="start"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        End
                                    </td>
                                    <td>
                                        : <input type="text" size="5" placeholder="hh:mm" maxlength="5" style="width: 90%;" onkeypress="return isNumber(event,this)" name="end"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        Period(minutes)
                                    </td>
                                    <td>
                                        : <input type="text" name="period" style="width: 90%;">
                                    </td>
                                </tr>

                            </table>
                        </div>
                    </div>
                </div>
            </form>

        </div>

        <div id="create-patient" style="width: 63%; font-size: 100%;  display: none; position: absolute;">
            <form method="post" th:action="@{/newPatient/add}">
                <div style="width: 100%; padding-top:1px; border: thick; ">
                    <div style="  border: 1px solid; border-color: #aaa;padding: 25px;background-color: white;box-shadow: 2px 2px 7px grey;">
                        <div style="margin-top: 2%;">
                            <div style="display: inline; margin-right: 15px">
                                <button style="padding-top: 10px; padding-bottom: 10px;" th:href="@{/newPatient/add}">
                                    <img th:src="@{/image/save1.png}" style="width: 20px; height: 20px;"> Save
                                </button>
                            </div>
                            <div style="display: inline;">
                                <button style="padding-top: 10px; padding-bottom: 10px; background-color: #82bcc9" onclick="hide()">
                                    <img th:src="@{/image/save.png}" style="width: 15px; height: 15px;"> Cancel
                                </button>
                            </div>
                        </div>
                        <h1 style="margin: 2%;">New Patient</h1>
                        <div style="margin-left: 3%; padding-bottom: 2%;">
                            <table class="create">
                                <tr>
                                    <td style="width: 40%">
                                        Arabic Patient Name
                                    </td>
                                    <td style="width: 40%">
                                        : <input type="text" name="arabicPatientName" style="width: 90%;" value="منذر نضال الحسيني">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 40%">
                                        English Patient Name
                                    </td>
                                    <td style="width: 40%">
                                        : <input type="text" name="englishPatientName" style="width: 90%;" value="monzer nedal al-husaini">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 40%">
                                        Phone Number
                                    </td>
                                    <td style="width: 40%">
                                        : <input type="text" name="patientPhone" style="width: 90%;" value="0776627658">
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        Birth Date
                                    </td>
                                    <td>
                                        : <input type="date" id="datepicker" required="required" data-position="top" name="birthDate" placeholder="bdate" value="04-24-1995"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 40%">
                                        Gender
                                    </td>
                                    <td style="width: 40%">
                                        : <select class="select-css" style="width: 90%;" name="gender"><option value="0">Select Patient Gender</option><option value="1" selected>Male</option><option value="2">Female</option></select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        Martial Status
                                    </td>
                                    <td>
                                        : <select class="select-css" style="width: 90%;" name="status"><option value="0">Select Patient martial status</option><option value="1" selected>Single</option><option value="2">Married</option></select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        Blood type
                                    </td>
                                    <td>
                                        : <select class="select-css" style="width: 90%;" name="bloodGroup"><option value="0">Select Patient blood group</option><option value="1">A</option><option value="2" selected>B</option><option value="3">O</option><option value="4">AB</option></select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        Spouse Name
                                    </td>
                                    <td>
                                        : <input type="text" name="spouseName" style="width: 90%;" value="Muath">
                                    </td>
                                </tr>

                            </table>
                        </div>
                    </div>
                </div>
            </form>
        </div>


		<div class="clearer"></div>
	</div>

	<!-- <div id="footer">footer</div> -->
</body>

<script>
    var dropdown = document.getElementsByClassName("dropbtn");
    var menu = document.getElementsByClassName("dropdown-content");
    var i;

    for (i = 0; i < dropdown.length; i++) {
        dropdown[i].addEventListener("click", function() {
            for(var i = 0 ; i < menu.length; i++){
                var item = dropdown[i].nextElementSibling;
                item.style.display = "none";
            }
            this.classList.toggle("show");
            var dropdownContent = this.nextElementSibling;
            if (dropdownContent.style.display === "inline-block") {
                dropdownContent.style.display="none";
            } else {
                dropdownContent.style.display = "inline-block";
            }
        });
    }
    window.onclick = function(event) {
        if (!event.target.matches('.dropbtn')) {
            var dropdowns = document.getElementsByClassName("dropdown-content");
            var i;
            for (i = 0; i < dropdowns.length; i++) {
                var openDropdown = dropdowns[i];
                openDropdown.style.display = "none";
            }
        }
    }
</script>

<script>
    // function myFunction() {
    //     document.getElementsByClassName("myDropdown").classList.toggle("show");
    // }
    //
    // // Close the dropdown if the user clicks outside of it
    // window.onclick = function(event) {
    //     if (!event.target.matches('.dropbtn')) {
    //         var dropdowns = document.getElementsByClassName("dropdown-content");
    //         var i;
    //         for (i = 0; i < dropdowns.length; i++) {
    //             var openDropdown = dropdowns[i];
    //             if (openDropdown.classList.contains('show')) {
    //                 openDropdown.classList.remove('show');
    //             }
    //         }
    //     }
    // }

function isNumber(evt,num) {
	// get keyboard event and then look its keyCode
	evt = (evt) ? evt : window.event;
	var charCode = (evt.which) ? evt.which : evt.keyCode;
	//check the event is numeric
	if (charCode > 31 && (charCode < 48 || charCode > 57) && charCode!=186) {

		return false;
	}

	// Check accordingly every new number must include regular date format

	if(num.value.length == 0 && (charCode==48 || charCode==49 || charCode==50))
	{
		return true;
	}
	else if(num.value.length == 1 && (charCode>=48 && charCode<=57))
	{
		return true;
	}
	else if(num.value.length == 2 && (charCode>=48 && charCode<=53))
	{
		num.value=num.value+":";
		return true;
	}
	else if(num.value.length == 3 && (charCode>=48 && charCode<=53))
	{
		//alert("Bingo");
		return true;
	}
	else if(num.value.length == 4 && (charCode>=48 && charCode<=57))
	{
		return true;
	}
	else
	{
		return false;
	}

	return true;
}

	function hide(show) {

        var appointment = document.getElementById("appointments");
        var intervals = document.getElementById("create-interval");
        var patient = document.getElementById("create-patient");
        if(show === "appointments"){
            appointment.style.display = "inline-block";
            intervals.style.display = "none";
            patient.style.display = "none";
        }
        if(show === "create-interval"){
            appointment.style.display = "none";
            intervals.style.display = "inline-block";
            patient.style.display = "none";
        }
        if(show === "create-patient"){
            appointment.style.display = "none";
            intervals.style.display = "none";
            patient.style.display = "inline-block";
        }
}

</script>
</html>